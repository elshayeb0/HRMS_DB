@model IEnumerable<HRMS.Web.Models.Mission.Mission>
@{
    ViewData["Title"] = "Mission Log";
    Layout = "~/Views/Shared/_LayoutCms.cshtml";
}

<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-end">
        <div>
            <h2 class="text-white fw-bold mb-0" style="text-shadow: 0 0 15px #30D158; font-family: 'Oxanium', sans-serif;">
                <i class="bi bi-crosshair me-2" style="color: #30D158;"></i> TACTICAL OBJECTIVES
            </h2>
            <p class="text-muted small mb-0" style="letter-spacing: 1px;">ACTIVE DIRECTIVES: @Model.Count()</p>
        </div>

        <!-- Quick Filter (Visual) -->
        <div class="d-flex gap-2">
            <span class="badge bg-dark border border-success text-success p-2">OPERATIVE: @User.Identity.Name</span>
        </div>
    </div>
</div>

@if (!Model.Any())
{
    <div class="cms-card p-5 text-center" style="border-color: rgba(48, 209, 88, 0.3); box-shadow: 0 0 30px rgba(48, 209, 88, 0.1);">
        <i class="bi bi-shield-check fs-1 mb-3 d-block" style="color: #30D158; text-shadow: 0 0 20px #30D158;"></i>
        <h4 class="text-white fw-bold" style="font-family: 'Oxanium'">NO ACTIVE DIRECTIVES</h4>
        <p class="text-muted">Standby for incoming transmission from Command.</p>
    </div>
}
else
{
    <div class="row g-4">
        @foreach (var item in Model)
        {
            // Tactical Color Logic
            string statusColor;
            string statusIcon;

            switch (item.Status)
            {
                case "Approved":
                    statusColor = "#30D158"; // Tactical Green
                    statusIcon = "bi-check-circle-fill";
                    break;
                case "Pending":
                    statusColor = "#fcee0a"; // Cyber Yellow
                    statusIcon = "bi-hourglass-split";
                    break;
                case "Rejected":
                    statusColor = "#FF003C"; // Glitch Red
                    statusIcon = "bi-x-octagon-fill";
                    break;
                case "Completed":
                    statusColor = "#00F0FF"; // Neon Cyan
                    statusIcon = "bi-flag-fill";
                    break;
                default:
                    statusColor = "#888";
                    statusIcon = "bi-circle";
                    break;
            }

            <div class="col-md-6 col-lg-4">
                <!-- Levitating Card with Dynamic Border Color -->
                <div class="cms-card h-100 d-flex flex-column" style="border-left: 4px solid @statusColor; transition: transform 0.3s;">

                    <!-- Header: Status & ID -->
                    <div class="cms-card-header d-flex justify-content-between align-items-center bg-transparent border-0 pb-0">
                        <span class="badge text-black fw-bold" style="background: @statusColor; box-shadow: 0 0 10px @statusColor;">
                            <i class="bi @statusIcon me-1"></i> @item.Status.ToUpper()
                        </span>
                        <small class="text-muted font-monospace" style="letter-spacing: 1px;">ID: #@item.MissionId</small>
                    </div>

                    <div class="cms-card-body pt-3">
                        <!-- Destination (Main Title) -->
                        <h5 class="text-white fw-bold mb-3" style="font-family: 'Oxanium'; letter-spacing: 1px; font-size: 1.2rem;">
                            <i class="bi bi-geo-alt-fill me-2" style="color: @statusColor; text-shadow: 0 0 10px @statusColor;"></i>
                            @item.Destination
                        </h5>

                        <!-- Timeline Data Block -->
                        <div class="p-3 rounded mb-3" style="background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.05);">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="text-muted small" style="font-size: 0.65rem; letter-spacing: 1px;">DEPLOYMENT</span>
                                <span class="text-white fw-bold small">@item.StartDate.ToString("dd MMM yyyy")</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span class="text-muted small" style="font-size: 0.65rem; letter-spacing: 1px;">EXTRACTION</span>
                                <span class="text-white fw-bold small">@item.EndDate.ToString("dd MMM yyyy")</span>
                            </div>
                        </div>

                        <!-- Commanding Officer -->
                        <div class="d-flex align-items-center justify-content-end mt-auto">
                            <div class="text-end">
                                <div class="text-muted" style="font-size: 0.6rem; letter-spacing: 1px;">COMMANDING OFFICER</div>
                                <div class="text-white small fw-bold">@item.ManagerName</div>
                            </div>
                            <div class="ms-2 d-flex align-items-center justify-content-center" style="width: 30px; height: 30px; background: rgba(255,255,255,0.1); border-radius: 50%;">
                                <i class="bi bi-person-fill text-muted"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}

<style>
    /* Hover Physics */
    .cms-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 20px rgba(48, 209, 88, 0.1) !important;
        z-index: 10;
        border-color: rgba(255,255,255,0.2);
    }
</style>